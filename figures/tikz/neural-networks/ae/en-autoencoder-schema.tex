\documentclass[beamer,crop,tikz]{standalone}

\usepackage{formation}

\begin{document}
  \begin{tikzpicture}[x=2cm]
    % Neurones
    \foreach \y in {1,...,5} {
        \node[input] (I\y) at (0, 3 - \y) {$x_\y$};
    }
    \foreach \y in {1,...,4} {
        \node[hencoder] (H1\y) at (1, 2.5 - \y) {};
    }
    \foreach \y in {1,...,3} {
        \node[hencoder] (H2\y) at (2, 2 - \y) {$z_\y$};
    }
    \foreach \y in {1,...,4} {
        \node[hencoder] (H3\y) at (3, 2.5 - \y) {};
    }
    \foreach \y in {1,...,5} {
        \node[output] (O\y) at (4, 3 - \y) {$\hat{x_\y}$};
    }
    % Arrows
    \foreach \i in {1,...,5} {
        \foreach \j in {1,...,4} {
        \draw[->,>=stealth] (I\i.east) to (H1\j.west);
        }
    }
    \foreach \i in {1,...,4} {
        \foreach \j in {1,...,3} {
        \draw[->,>=stealth] (H1\i.east) to (H2\j.west);
        }
    }
    \foreach \i in {1,...,3} {
        \foreach \j in {1,...,4} {
        \draw[->,>=stealth] (H2\i.east) to (H3\j.west);
        }
    }
    \foreach \i in {1,...,4} {
        \foreach \j in {1,...,5} {
        \draw[->,>=stealth] (H3\i.east) to (O\j.west);
        }
    }
    % Boxes
    \draw[very thick,dashed,MediumChampagne!50!black] ($(I1.north west) + (-0.1,0.2)$) rectangle ($(O5.south east) + (-1.9,-0.1)$);
    \draw[very thick,dashed,DeepSpaceSparkle] ($(H21.north west) + (-0.1,1.1)$) rectangle ($(O5.south east) + (+0.1,-0.2)$);
    % Text above
    \node at (1, 3) {\textcolor{MediumChampagne!50!black}{\textbf{Encoder}}};
    \node at (3, -3) {\textcolor{DeepSpaceSparkle}{\textbf{Decoder}}};
  \end{tikzpicture}
\end{document}
